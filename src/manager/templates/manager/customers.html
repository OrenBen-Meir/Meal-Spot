{% extends "base_manager.html" %}

<!-- dummy html template for demonstration, only exists so git recognizes an empty folder -->
<!-- feel free to delete this -->

{% block page_css %}
<!-- page css -->
{% endblock %}

{% block page_js %}
<!-- page javascript -->
{% endblock %}

{% block page_content %}
<!-- page html -->
<div class = "customers">
        <h2 id = "title">All Customers:</h2>
  
  
        <!--Get list of all customers from restaurant-->

        <table id = "cust-name">
            <tr>
                <th>Last Name:</th>
                <th>First Name:</th>
                <th>Status:</th>
                <th>Rating:</th>
                <th># Complaints received:</th>
            </tr>

            {% for info in customer_info %}
                <tr>
                    {% comment %} {% customer_id = registered_customer.customer.user.id %} {% endcomment %}
                    <td class = "last-n">{{ info.registered_customer.customer.last_name }}</td>
                    <td class = "first-n">{{ info.registered_customer.customer.first_name }}</td>
                    <td class = "status">{{ info.registered_customer.status }}</td>
                    <td class = "rating">{{ info.registered_customer.status }}</td>
                    <td class = "num-complaints">{{ info.complaintcount }}</td>
                    <td class = "more-info">
                        <a href="{% url 'manager-customerdetails' info.registered_customer.customer.user.id %}" class="button" target="_blank">More info</a>
                    </td>
                </tr>
            
                <tr>
                    <form method="POST" action="{% url "manager-customers" %}">
                        <input class="customer_id" type="hidden" value="{{ info.registered_customer.customer.user.id }}"></input>
                        
                        <input class="promote" task="promote" type="button" value="Promote">Promote to VIP</input>
                        <input class="demote" task="demote" type="button" value="Demote">Demote to Regular</input>
                        <input class="blacklist" task="blacklist" type="button" value="Blacklist">Blacklist</input>
                        <input class="remove" task="remove" type="button" value="Remove">Remove Registration</input>
                    </form>
                </tr>
            {% endfor %}
      </table>
    </div>
{% endblock %}